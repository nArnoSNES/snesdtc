<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PVSnesLib: interrupt.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PVSnesLib
   &#160;<span id="projectnumber">2.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_1fce5620edc95505dc9b3bb80528afca.html">snes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">interrupt.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>snes interrupt support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="a00407_source.html">snes/snestypes.h</a>&gt;</code><br />
</div>
<p><a href="a00389_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a88d83a889f8e1d016cedfbd0476db989"><td class="memItemLeft" align="right" valign="top"><a id="a88d83a889f8e1d016cedfbd0476db989"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a88d83a889f8e1d016cedfbd0476db989">HBL_READY</a>&#160;&#160;&#160;(1&lt;&lt;6)</td></tr>
<tr class="memdesc:a88d83a889f8e1d016cedfbd0476db989"><td class="mdescLeft">&#160;</td><td class="mdescRight">H-Blank Period Flag (0=No, 1=HBlank) <br /></td></tr>
<tr class="separator:a88d83a889f8e1d016cedfbd0476db989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac352c6a25f2e170d7b2bf2236bd31427"><td class="memItemLeft" align="right" valign="top"><a id="ac352c6a25f2e170d7b2bf2236bd31427"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#ac352c6a25f2e170d7b2bf2236bd31427">INT_HVIRQ_H</a>&#160;&#160;&#160;(1&lt;&lt;4)</td></tr>
<tr class="memdesc:ac352c6a25f2e170d7b2bf2236bd31427"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br /></td></tr>
<tr class="separator:ac352c6a25f2e170d7b2bf2236bd31427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a062bd6ffa662638df005a03cd2c0a3fb"><td class="memItemLeft" align="right" valign="top"><a id="a062bd6ffa662638df005a03cd2c0a3fb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a062bd6ffa662638df005a03cd2c0a3fb">INT_HVIRQ_HV</a>&#160;&#160;&#160;(2 &lt;&lt;4)</td></tr>
<tr class="memdesc:a062bd6ffa662638df005a03cd2c0a3fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br /></td></tr>
<tr class="separator:a062bd6ffa662638df005a03cd2c0a3fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b588e60e5abfeaf59ba4c8fd826cfa"><td class="memItemLeft" align="right" valign="top"><a id="a54b588e60e5abfeaf59ba4c8fd826cfa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a54b588e60e5abfeaf59ba4c8fd826cfa">INT_HVIRQ_V</a>&#160;&#160;&#160;(1&lt;&lt;5)</td></tr>
<tr class="memdesc:a54b588e60e5abfeaf59ba4c8fd826cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) <br /></td></tr>
<tr class="separator:a54b588e60e5abfeaf59ba4c8fd826cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a66ed24f182a8d056f7db1cab6eb82"><td class="memItemLeft" align="right" valign="top"><a id="ab4a66ed24f182a8d056f7db1cab6eb82"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#ab4a66ed24f182a8d056f7db1cab6eb82">INT_JOYPAD_ENABLE</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:ab4a66ed24f182a8d056f7db1cab6eb82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad) <br /></td></tr>
<tr class="separator:ab4a66ed24f182a8d056f7db1cab6eb82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435380b6460ebd669f2b344ea79316d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a435380b6460ebd669f2b344ea79316d6">INT_VBLENABLE</a>&#160;&#160;&#160;(1&lt;&lt;7)</td></tr>
<tr class="memdesc:a435380b6460ebd669f2b344ea79316d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit defines for the interrupt registers.  <a href="#a435380b6460ebd669f2b344ea79316d6">More...</a><br /></td></tr>
<tr class="separator:a435380b6460ebd669f2b344ea79316d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2094086b43aa835d241e35153f8ed1bc"><td class="memItemLeft" align="right" valign="top"><a id="a2094086b43aa835d241e35153f8ed1bc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a2094086b43aa835d241e35153f8ed1bc">PAD_BUSY</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="memdesc:a2094086b43aa835d241e35153f8ed1bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auto-Joypad-Read Busy Flag (1=Busy) (see 4200h, and 4218h..421Fh) <br /></td></tr>
<tr class="separator:a2094086b43aa835d241e35153f8ed1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25c0fcc5e2519aa98aebe289d391ca2"><td class="memItemLeft" align="right" valign="top"><a id="af25c0fcc5e2519aa98aebe289d391ca2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#af25c0fcc5e2519aa98aebe289d391ca2">REG_HVBJOY</a>&#160;&#160;&#160;(*(vuint8*)0x4212)</td></tr>
<tr class="memdesc:af25c0fcc5e2519aa98aebe289d391ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">H/V-Blank flag and Joypad Busy flag (R). 7 V-Blank Period Flag (0=No, 1=VBlank) 6 H-Blank Period Flag (0=No, 1=HBlank) 5-1 Not used 0 Auto-Joypad-Read Busy Flag (1=Busy) (see 4200h, and 4218h..421Fh) The Hblank flag gets toggled in ALL scanlines (including during Vblank/Vsync). Both Vblank and Hblank are always toggling (even during Forced Blank, and no matter if IRQs or NMIs are enabled. <br /></td></tr>
<tr class="separator:af25c0fcc5e2519aa98aebe289d391ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8627bb48b8760c306190eb7ed050af73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a8627bb48b8760c306190eb7ed050af73">REG_NMITIMEN</a>&#160;&#160;&#160;(*(vuint8*)0x4200)</td></tr>
<tr class="memdesc:a8627bb48b8760c306190eb7ed050af73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Enable and Joypad Request (W). 7 VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) 6 Not used 5-4 H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) 3-1 Not used 0 Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad)  <a href="#a8627bb48b8760c306190eb7ed050af73">More...</a><br /></td></tr>
<tr class="separator:a8627bb48b8760c306190eb7ed050af73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a29932a3a9cf7dbbf25a3a30c9e25fa"><td class="memItemLeft" align="right" valign="top"><a id="a3a29932a3a9cf7dbbf25a3a30c9e25fa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a3a29932a3a9cf7dbbf25a3a30c9e25fa">REG_RDNMI</a>&#160;&#160;&#160;(*(vuint8*)0x4210)</td></tr>
<tr class="memdesc:a3a29932a3a9cf7dbbf25a3a30c9e25fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">V-Blank NMI Flag and CPU Version Number (R) (Read/Ack) 7 Vblank NMI Flag (0=None, 1=Interrupt Request) (set on Begin of Vblank) 6-4 Not used 3-0 CPU 5A22 Version Number (version 2 exists) The NMI flag gets set at begin of Vblank (this happens even if NMIs are disabled). The flag gets reset automatically at end of Vblank, and gets also reset after reading from this register. The SNES has only one NMI source (vblank), and the NMI flag is automatically reset (on vblank end), so there's normally no need to read/acknowledge the flag, except one special case: If one does disable and re-enable NMIs, then an old NMI may be executed again; acknowledging avoids that effect. The CPU includes another internal NMI flag, which gets set when "[4200h].7 AND [4210h].7" changes from 0-to-1, and gets cleared when the NMI gets executed (which should happen around after the next opcode) (if a DMA transfer is in progress, then it is somewhere after the DMA, in that case the NMI can get executed outside of the Vblank period, ie. at a time when [4210h].7 is no longer set). <br /></td></tr>
<tr class="separator:a3a29932a3a9cf7dbbf25a3a30c9e25fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1982e080d74da9e146881ca580ffec0d"><td class="memItemLeft" align="right" valign="top"><a id="a1982e080d74da9e146881ca580ffec0d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a1982e080d74da9e146881ca580ffec0d">VBL_READY</a>&#160;&#160;&#160;(1&lt;&lt;7)</td></tr>
<tr class="memdesc:a1982e080d74da9e146881ca580ffec0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">V-Blank Period Flag (0=No, 1=VBlank) <br /></td></tr>
<tr class="separator:a1982e080d74da9e146881ca580ffec0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03304aaf535795c2857e357e028cdebe"><td class="memItemLeft" align="right" valign="top"><a id="a03304aaf535795c2857e357e028cdebe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a03304aaf535795c2857e357e028cdebe">WaitVBLFlag</a></td></tr>
<tr class="memdesc:a03304aaf535795c2857e357e028cdebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">macro to wait the VBL flag OK <br /></td></tr>
<tr class="separator:a03304aaf535795c2857e357e028cdebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a64d4258f3ba782ce6db9f940fc88cc21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a64d4258f3ba782ce6db9f940fc88cc21">nmiSet</a> (<a class="el" href="a00407.html#a65983c92bfd6f87a74927ad398d4b271">VoidFn</a> handler)</td></tr>
<tr class="memdesc:a64d4258f3ba782ce6db9f940fc88cc21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a handler for the given interrupt mask. Specify the handler to use for the nmi interrupt.  <a href="#a64d4258f3ba782ce6db9f940fc88cc21">More...</a><br /></td></tr>
<tr class="separator:a64d4258f3ba782ce6db9f940fc88cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815e2626bd26d0e936d507a363ecd723"><td class="memItemLeft" align="right" valign="top"><a id="a815e2626bd26d0e936d507a363ecd723"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00389.html#a815e2626bd26d0e936d507a363ecd723">WaitForVBlank</a> (void)</td></tr>
<tr class="memdesc:a815e2626bd26d0e936d507a363ecd723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for vblank interrupt Waits for a vertical blank interrupt. <br /></td></tr>
<tr class="separator:a815e2626bd26d0e936d507a363ecd723"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>snes interrupt support. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a435380b6460ebd669f2b344ea79316d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a435380b6460ebd669f2b344ea79316d6">&#9670;&nbsp;</a></span>INT_VBLENABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INT_VBLENABLE&#160;&#160;&#160;(1&lt;&lt;7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bit defines for the interrupt registers. </p>
<p>VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) </p>

</div>
</div>
<a id="a8627bb48b8760c306190eb7ed050af73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8627bb48b8760c306190eb7ed050af73">&#9670;&nbsp;</a></span>REG_NMITIMEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REG_NMITIMEN&#160;&#160;&#160;(*(vuint8*)0x4200)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt Enable and Joypad Request (W). 7 VBlank NMI Enable (0=Disable, 1=Enable) (Initially disabled on reset) 6 Not used 5-4 H/V IRQ (0=Disable, 1=At H=H + V=Any, 2=At V=V + H=0, 3=At H=H + V=V) 3-1 Not used 0 Joypad Enable (0=Disable, 1=Enable Automatic Reading of Joypad) </p>
<p>Disabling IRQs (via bit4-5) does additionally acknowledge IRQs. There's no such effect when disabling NMIs (via bit7). </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a64d4258f3ba782ce6db9f940fc88cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64d4258f3ba782ce6db9f940fc88cc21">&#9670;&nbsp;</a></span>nmiSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nmiSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00407.html#a65983c92bfd6f87a74927ad398d4b271">VoidFn</a>&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a handler for the given interrupt mask. Specify the handler to use for the nmi interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Address of the function to use as an interrupt service routine </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
